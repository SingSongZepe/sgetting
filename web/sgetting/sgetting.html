<!--
    SingSongZepe Sgetting.
    Thanks for Evan You.
    © 2023 SingSongZepe Sgetting by Vue3.

    ===
    「この能力が光散らす その先に遥かな想いを」
    # 无法成功数字化你的心情 但我一直在这里 #
-->
<!DOCTYPE html>
<html>
    <head>
        <title>SGetting</title>
        <script src="../sgetting/res/js/jquery-3.7.0.min.js"></script>
        <script src="../sgetting/res/js/vue.min.js"></script>
        <!-- <script src="../res/js/open_page.js"></script> -->
        <link rel="icon" href="../sgetting/res/img/reSSZp.png">
        <link rel="stylesheet" href="../sgetting/res/css/font.css" type="text/css">
        <link rel="stylesheet" href="../sgetting/res/css/color.css" type="text/css">
        <link rel="stylesheet" href="../sgetting/sgetting/css/sgetting.css">
    </head>
    <body>
        <div id="app">
            <div class="header bg-color-default-tran6">
                <img src="../sgetting/res/img/Sgetting64.png" class="img-sgetting" alt="Sgetting.png"></img>
                <div class="login bg-color-sider" @mousemove="light_on" @mouseleave="light_off" @click="login">
                    <h4 class="login-text">Login</h4>
                    <div class="light"></div>
                </div>
            </div>
            <div class="body">
                <div class="pding left-pding"></div>
                <div class="vertical-line bg-color-sider"></div>
                <div class="main">
                    <div class="chat-text-ctan bg-color-default-tran4">
                        <img src="../sgetting/res/img/logo_sider.png" class="img-sider" alt="logo_sider.png">
                        <div class="chat-text">
                            <h4 class="fg-lcolor-sider">Chat</h4>
                        </div>
                        <div class="chat-new">
                            <h4 class="fg-lcolor-sider">New Chat</h4>
                        </div>
                    </div>
                    <div class="chat-view">
                        <div class="chat-view-content custom-scrollbar">
                            <div class="chat-bubble bubble-user bg-color-default-tran2">
                                <div class="chat-bubble-head">
                                    <div class="block"></div>
                                    <img class="chat-bubble-head-img" src="../sgetting/res/img/user.png" alt="user.png">
                                </div>
                                <div class="chat-bubble-content">
                                    <textarea class="chat-bubble-content-text font-poppins" readonly="readonly" autocomplete="off">ello World dwa ddddddddddddddddwajd kjw akljdlkwja kljkhklwa jlkrj af akejlk rjalkjl kajkljlkeajlk fj dwadwalkjrkej kjk ejkljrlk jalkwjlk jwaek wklajdjawlkjfahe dawkjlkd jwaljlkd jlwkajdlk jwalk</textarea>
                                </div>
                            </div>
                            <bubble v-for="message in DOM.messages" v-bind:message="message"></bubble>
                        </div>
                    </div>
                    <div class="horizontal-line bg-color-sider"></div>
                    <div class="chat-enter-ctan">
                        <div class="chat-gpt-kind">
                            <svg class="chat-gpt-icon" width="20" height="20" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="8" r="8" fill="#19C37D"></circle><path d="M13.1351 6.91143C13.4073 6.09431 13.3136 5.19918 12.8782 4.45593C12.2235 3.31593 10.9072 2.72943 9.6217 3.00543C9.04983 2.36118 8.2282 1.99481 7.36683 2.00006C6.05283 1.99706 4.88695 2.84306 4.4827 4.09331C3.63858 4.26618 2.90995 4.79456 2.48358 5.54343C1.82395 6.68043 1.97433 8.11368 2.85558 9.08868C2.58333 9.9058 2.67708 10.8009 3.11245 11.5442C3.7672 12.6842 5.08345 13.2707 6.36895 12.9947C6.94045 13.6389 7.76245 14.0053 8.62383 13.9997C9.93858 14.0031 11.1048 13.1563 11.5091 11.9049C12.3532 11.7321 13.0818 11.2037 13.5082 10.4548C14.1671 9.3178 14.0163 7.88568 13.1355 6.91068L13.1351 6.91143ZM8.62458 13.2156C8.09845 13.2163 7.58883 13.0322 7.18495 12.6951C7.20333 12.6853 7.2352 12.6677 7.25583 12.6549L9.64533 11.2749C9.76758 11.2056 9.84258 11.0754 9.84183 10.9348V7.56618L10.8517 8.1493C10.8626 8.15455 10.8697 8.16505 10.8712 8.17705V10.9667C10.8697 12.2072 9.86508 13.2129 8.62458 13.2156ZM3.79308 11.1519C3.52945 10.6967 3.43458 10.1631 3.52495 9.64518C3.54258 9.65568 3.5737 9.6748 3.59583 9.68755L5.98533 11.0676C6.10645 11.1384 6.25645 11.1384 6.37795 11.0676L9.29508 9.38305V10.5493C9.29583 10.5613 9.2902 10.5729 9.28083 10.5804L6.86545 11.9751C5.78958 12.5946 4.41558 12.2263 3.79345 11.1519H3.79308ZM3.1642 5.93606C3.4267 5.48006 3.84108 5.13131 4.33458 4.95018C4.33458 4.97081 4.33345 5.00718 4.33345 5.03268V7.79305C4.3327 7.9333 4.4077 8.06343 4.52958 8.1328L7.4467 9.81693L6.43683 10.4001C6.4267 10.4068 6.41395 10.4079 6.4027 10.4031L3.98695 9.0073C2.91333 8.38555 2.54508 7.01193 3.16383 5.93643L3.1642 5.93606ZM11.4615 7.86693L8.54433 6.18243L9.5542 5.59968C9.56433 5.59293 9.57708 5.59181 9.58833 5.59668L12.0041 6.9913C13.0796 7.61268 13.4482 8.98855 12.8268 10.0641C12.564 10.5193 12.15 10.8681 11.6568 11.0496V8.20668C11.658 8.06643 11.5833 7.93668 11.4618 7.86693H11.4615ZM12.4665 6.35418C12.4488 6.34331 12.4177 6.32456 12.3956 6.31181L10.0061 4.93181C9.88495 4.86093 9.73495 4.86093 9.61345 4.93181L6.69633 6.6163V5.45006C6.69558 5.43806 6.7012 5.42643 6.71058 5.41893L9.12595 4.02543C10.2018 3.40481 11.5773 3.77418 12.1976 4.85043C12.4597 5.30493 12.5546 5.83706 12.4657 6.35418H12.4665ZM6.14733 8.4328L5.13708 7.84968C5.1262 7.84443 5.11908 7.83393 5.11758 7.82193V5.03231C5.11833 3.79031 6.12595 2.78381 7.36795 2.78456C7.89333 2.78456 8.40183 2.96906 8.8057 3.30506C8.78733 3.31481 8.75583 3.33243 8.73483 3.34518L6.34533 4.72518C6.22308 4.79456 6.14808 4.92431 6.14883 5.06493L6.14733 8.43205V8.4328ZM6.69595 7.25005L7.99533 6.49968L9.2947 7.24968V8.75005L7.99533 9.50005L6.69595 8.75005V7.25005Z" fill="white"></path></svg>
                            <p class="chat-gpt-kind-text fg-color-gray-black">
                                GPT-3.5 Turbo
                            </p>
                        </div>
                        <div class="chat-enter">
                            <textarea class="chat-enter-input" placeholder="question for gpt"></textarea>
                            <div class="chat-enter-send">
                                <p class="chat-enter-send-text fg-lcolor-sider" @click="ask()">Send</p>
                            </div>
                        </div>
                        <div class="chat-enter-tag">
                            <p class="chat-enter-tag-by fg-color-gray-black">
                                Created by SingSongZepe
                            </p>
                        </div>
                    </div>
                    <div class="horizontal-line bg-color-sider"></div>
                </div>
                <div class="vertical-line bg-color-sider"></div>
                <div class="pding right-pding"></div>
            </div>
            <div class="footer bg-color-default-tran6">
                <div class="textual">
                    <p class="textual-text">Hello World</p>
                </div>
            </div>
        </div>
    </body>
    <script>
        const BUBBLE = {
            props: ['message'],
            data() {
                return {
                    BUBBLE_AI_: "bubble-ai",
                    BUBBLE_USER_: "bubble-user",
                    SRC_AI: "../sgetting/res/img/ai.png",
                    SRC_USER: "../sgetting/res/img/user.png",
                    bubble_kind: this.BUBBLE_AI_,
                    img_src: this.SRC_AI,
                    scroll_height: {
                        height: "40px",
                    },
                    PADDING_HEIGHT: 10,
                }
            },
            // in the template, there must fill in the icon of ai / user
            // and its style .bubble-ai .bubble-user
            template: `
                <div class="chat-bubble bg-color-default-tran2" :class="bubble_kind">
                    <div class="chat-bubble-head">
                        <div class="block"></div>
                        <img class="chat-bubble-head-img" :src="img_src">
                    </div>
                    <div class="chat-bubble-content">
                        <textarea class="chat-bubble-content-text font-poppins" readonly="readonly" autocomplete="off" ref="ta" :style="scroll_height"></textarea>
                    </div>
                </div>
            `,
            methods: {
            },
            computed: {
            },
            created() { 
                // ai / user
                if (this.$props.message.sender == "user") {
                    this.bubble_kind = this.BUBBLE_USER_;
                    this.img_src = this.SRC_USER;
                } else if (this.$props.message.sender == "ai") {
                    this.bubble_kind = this.BUBBLE_AI_;
                    this.img_src = this.SRC_AI;
                }
            },
            mounted() {
                // set text
                this.$refs.ta.value = this.$props.message.content;
                this.scroll_height.height = `${this.$refs.ta.scrollHeight + this.PADDING_HEIGHT}px`;

                console.log("bubble created");
            }
        }
        let vue = new Vue({
            el: "#app",
            data() {
                return {
                    LOGIN: {
                        PAGE_LOGIN: "login",
                    },
                    DOM: {
                        messages: [
                            // store all the messages from user and from ai
                            // will be rendered to the DOM automatically by vue
                        ]
                    },
                }
            },
            created() {
                console.log("welcome to SingSongZepe SGetting!");

                this.DOM.messages.push({
                    sender: "user",
                    content: "ello World dwa ddddddddddddddddwajd kjw akljdlkwja kljkhklwa jlkrj af akejlk rjalkjl kajkljlkeajlk fj dwadwalkjrkej kjk ejkljrlk jalkwjlk jwaek wklajdjawlkjfahe dawkjlkd jwaljlkd jlwkajdlk jwalk dwa dwa ",
                })
                this.DOM.messages.push({
                    sender: "ai",
                    content: "ello World dwa ddddddddddddddddwajd kjw akljdlkwja kljkhklwa jlkrj af akejlk rjalkjl kajkljlkeajlk fj dwadwalkjrkej kjk ejkljrlk jalkwjlk jwaek wklajdjawlkjfahe dawkjlkd jwaljlkd jlwkajdlk jwalk dwa dwa ",
                })
                this.DOM.messages.push({
                    sender: "user",
                    content: "ello World dwa ddddddddddddddddwajd kjw akljdlkwja kljkhklwa jlkrj af akejlk rjalkjl kajkljlkeajlk fj dwadwalkjrkej kjk ejkljrlk jalkwjlk jwaek wklajdjawlkjfahe dawkjlkd jwaljlkd jlwkajdlk jwalk dwa dwa ",
                })
                this.DOM.messages.push({
                    sender: "ai",
                    content: "ello World dwa ddddddddddddddddwajd kjw akljdlkwja kljkhklwa jlkrj af akejlk rjalkjl kajkljlkeajlk fj dwadwalkjrkej kjk ejkljrlk jalkwjlk jwaek wklajdjawlkjfahe dawkjlkd jwaljlkd jlwkajdlk jwalk dwa dwa ",
                })
            },
            mounted() {
            },
            computed() {
            },
            methods: {
                login(_) {
                    // open_page(this.LOGIN.PAGE_LOGIN);
                },
                light_on(e) {
                    const x = e.offsetX;
                    const y = e.offsetY;
                    const light = document.querySelector(".light");
                    light.style.background = `radial-gradient(circle at ${x}px ${y}px, rgba(255,255,255,0) 0%, rgba(255,255,255,0.8) 70%)`;
                    light.style.opacity = 1;
                },
                light_off(e) {
                    const light = document.querySelector(".light");
                    light.style.opacity = 0;
                },
                ask() { // clicked
                    let ta = document.querySelector(".chat-enter-input");
                    if (!ta.value) {
                        alert("Please enter your question");
                        return false;
                    }
                    this.DOM.messages.push({
                        sender: "user",
                        content: ta.value,
                    })
                    $.ajax({
                        url: ""
                    })
                }
            },
            components: {
                "bubble": BUBBLE,
            }
        })
    </script>
</html>